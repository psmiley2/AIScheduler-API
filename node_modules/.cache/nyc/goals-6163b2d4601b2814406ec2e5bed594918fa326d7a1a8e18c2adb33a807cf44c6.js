function cov_qh4xihsq(){var path="C:\\Users\\peter\\Desktop\\Files\\perhail\\server\\routes\\goals.js";var hash="4d330c1f1b1ed4934c1c1314a540dcbd4532421f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\peter\\Desktop\\Files\\perhail\\server\\routes\\goals.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:34}},"1":{start:{line:2,column:15},end:{line:2,column:31}},"2":{start:{line:3,column:21},end:{line:3,column:39}},"3":{start:{line:5,column:13},end:{line:5,column:38}},"4":{start:{line:9,column:0},end:{line:50,column:3}},"5":{start:{line:10,column:17},end:{line:10,column:34}},"6":{start:{line:11,column:17},end:{line:11,column:19}},"7":{start:{line:13,column:4},end:{line:15,column:5}},"8":{start:{line:14,column:8},end:{line:14,column:69}},"9":{start:{line:17,column:4},end:{line:21,column:5}},"10":{start:{line:18,column:8},end:{line:18,column:38}},"11":{start:{line:19,column:8},end:{line:19,column:37}},"12":{start:{line:20,column:8},end:{line:20,column:15}},"13":{start:{line:23,column:30},end:{line:23,column:38}},"14":{start:{line:24,column:15},end:{line:29,column:5}},"15":{start:{line:31,column:4},end:{line:41,column:44}},"16":{start:{line:37,column:12},end:{line:39,column:13}},"17":{start:{line:38,column:16},end:{line:38,column:71}},"18":{start:{line:41,column:24},end:{line:41,column:42}},"19":{start:{line:43,column:4},end:{line:49,column:5}},"20":{start:{line:44,column:8},end:{line:44,column:38}},"21":{start:{line:46,column:8},end:{line:46,column:37}},"22":{start:{line:48,column:8},end:{line:48,column:35}},"23":{start:{line:55,column:0},end:{line:84,column:3}},"24":{start:{line:56,column:17},end:{line:56,column:34}},"25":{start:{line:57,column:16},end:{line:57,column:18}},"26":{start:{line:58,column:17},end:{line:58,column:19}},"27":{start:{line:60,column:4},end:{line:62,column:5}},"28":{start:{line:61,column:8},end:{line:61,column:69}},"29":{start:{line:64,column:4},end:{line:67,column:5}},"30":{start:{line:65,column:8},end:{line:65,column:37}},"31":{start:{line:66,column:8},end:{line:66,column:15}},"32":{start:{line:69,column:4},end:{line:77,column:44}},"33":{start:{line:71,column:12},end:{line:75,column:13}},"34":{start:{line:72,column:16},end:{line:72,column:35}},"35":{start:{line:74,column:16},end:{line:74,column:63}},"36":{start:{line:77,column:24},end:{line:77,column:42}},"37":{start:{line:79,column:4},end:{line:83,column:5}},"38":{start:{line:80,column:8},end:{line:80,column:37}},"39":{start:{line:82,column:8},end:{line:82,column:36}},"40":{start:{line:89,column:0},end:{line:132,column:3}},"41":{start:{line:90,column:29},end:{line:90,column:39}},"42":{start:{line:91,column:15},end:{line:91,column:19}},"43":{start:{line:92,column:17},end:{line:92,column:19}},"44":{start:{line:93,column:4},end:{line:95,column:5}},"45":{start:{line:94,column:8},end:{line:94,column:69}},"46":{start:{line:96,column:4},end:{line:98,column:5}},"47":{start:{line:97,column:8},end:{line:97,column:69}},"48":{start:{line:100,column:4},end:{line:103,column:5}},"49":{start:{line:101,column:8},end:{line:101,column:37}},"50":{start:{line:102,column:8},end:{line:102,column:15}},"51":{start:{line:105,column:4},end:{line:125,column:44}},"52":{start:{line:107,column:12},end:{line:123,column:13}},"53":{start:{line:109,column:16},end:{line:115,column:17}},"54":{start:{line:110,column:20},end:{line:114,column:21}},"55":{start:{line:112,column:24},end:{line:112,column:33}},"56":{start:{line:113,column:24},end:{line:113,column:30}},"57":{start:{line:116,column:16},end:{line:120,column:17}},"58":{start:{line:117,column:20},end:{line:119,column:22}},"59":{start:{line:122,column:16},end:{line:122,column:63}},"60":{start:{line:125,column:24},end:{line:125,column:42}},"61":{start:{line:127,column:4},end:{line:131,column:5}},"62":{start:{line:128,column:8},end:{line:128,column:37}},"63":{start:{line:130,column:8},end:{line:130,column:35}},"64":{start:{line:136,column:16},end:{line:142,column:1}},"65":{start:{line:137,column:4},end:{line:139,column:5}},"66":{start:{line:138,column:8},end:{line:138,column:21}},"67":{start:{line:140,column:4},end:{line:140,column:16}},"68":{start:{line:144,column:0},end:{line:144,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:24},end:{line:9,column:25}},loc:{start:{line:9,column:44},end:{line:50,column:1}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:36,column:14},end:{line:36,column:15}},loc:{start:{line:36,column:24},end:{line:40,column:9}},line:36},"2":{name:"(anonymous_2)",decl:{start:{line:41,column:15},end:{line:41,column:16}},loc:{start:{line:41,column:24},end:{line:41,column:42}},line:41},"3":{name:"(anonymous_3)",decl:{start:{line:55,column:23},end:{line:55,column:24}},loc:{start:{line:55,column:43},end:{line:84,column:1}},line:55},"4":{name:"(anonymous_4)",decl:{start:{line:70,column:14},end:{line:70,column:15}},loc:{start:{line:70,column:24},end:{line:76,column:9}},line:70},"5":{name:"(anonymous_5)",decl:{start:{line:77,column:15},end:{line:77,column:16}},loc:{start:{line:77,column:24},end:{line:77,column:42}},line:77},"6":{name:"(anonymous_6)",decl:{start:{line:89,column:31},end:{line:89,column:32}},loc:{start:{line:89,column:51},end:{line:132,column:1}},line:89},"7":{name:"(anonymous_7)",decl:{start:{line:106,column:14},end:{line:106,column:15}},loc:{start:{line:106,column:24},end:{line:124,column:9}},line:106},"8":{name:"(anonymous_8)",decl:{start:{line:125,column:15},end:{line:125,column:16}},loc:{start:{line:125,column:24},end:{line:125,column:42}},line:125},"9":{name:"(anonymous_9)",decl:{start:{line:136,column:16},end:{line:136,column:17}},loc:{start:{line:136,column:24},end:{line:142,column:1}},line:136}},branchMap:{"0":{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:13,column:4},end:{line:15,column:5}}],line:13},"1":{loc:{start:{line:17,column:4},end:{line:21,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:21,column:5}},{start:{line:17,column:4},end:{line:21,column:5}}],line:17},"2":{loc:{start:{line:37,column:12},end:{line:39,column:13}},type:"if",locations:[{start:{line:37,column:12},end:{line:39,column:13}},{start:{line:37,column:12},end:{line:39,column:13}}],line:37},"3":{loc:{start:{line:43,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:43,column:4},end:{line:49,column:5}},{start:{line:43,column:4},end:{line:49,column:5}}],line:43},"4":{loc:{start:{line:60,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:62,column:5}},{start:{line:60,column:4},end:{line:62,column:5}}],line:60},"5":{loc:{start:{line:64,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:64,column:4},end:{line:67,column:5}},{start:{line:64,column:4},end:{line:67,column:5}}],line:64},"6":{loc:{start:{line:71,column:12},end:{line:75,column:13}},type:"if",locations:[{start:{line:71,column:12},end:{line:75,column:13}},{start:{line:71,column:12},end:{line:75,column:13}}],line:71},"7":{loc:{start:{line:79,column:4},end:{line:83,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:83,column:5}},{start:{line:79,column:4},end:{line:83,column:5}}],line:79},"8":{loc:{start:{line:93,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:95,column:5}},{start:{line:93,column:4},end:{line:95,column:5}}],line:93},"9":{loc:{start:{line:93,column:8},end:{line:93,column:50}},type:"binary-expr",locations:[{start:{line:93,column:8},end:{line:93,column:27}},{start:{line:93,column:31},end:{line:93,column:50}}],line:93},"10":{loc:{start:{line:96,column:4},end:{line:98,column:5}},type:"if",locations:[{start:{line:96,column:4},end:{line:98,column:5}},{start:{line:96,column:4},end:{line:98,column:5}}],line:96},"11":{loc:{start:{line:96,column:8},end:{line:96,column:50}},type:"binary-expr",locations:[{start:{line:96,column:8},end:{line:96,column:27}},{start:{line:96,column:31},end:{line:96,column:50}}],line:96},"12":{loc:{start:{line:100,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:103,column:5}},{start:{line:100,column:4},end:{line:103,column:5}}],line:100},"13":{loc:{start:{line:107,column:12},end:{line:123,column:13}},type:"if",locations:[{start:{line:107,column:12},end:{line:123,column:13}},{start:{line:107,column:12},end:{line:123,column:13}}],line:107},"14":{loc:{start:{line:110,column:20},end:{line:114,column:21}},type:"if",locations:[{start:{line:110,column:20},end:{line:114,column:21}},{start:{line:110,column:20},end:{line:114,column:21}}],line:110},"15":{loc:{start:{line:116,column:16},end:{line:120,column:17}},type:"if",locations:[{start:{line:116,column:16},end:{line:120,column:17}},{start:{line:116,column:16},end:{line:120,column:17}}],line:116},"16":{loc:{start:{line:127,column:4},end:{line:131,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:131,column:5}},{start:{line:127,column:4},end:{line:131,column:5}}],line:127},"17":{loc:{start:{line:137,column:4},end:{line:139,column:5}},type:"if",locations:[{start:{line:137,column:4},end:{line:139,column:5}},{start:{line:137,column:4},end:{line:139,column:5}}],line:137},"18":{loc:{start:{line:137,column:8},end:{line:137,column:42}},type:"binary-expr",locations:[{start:{line:137,column:8},end:{line:137,column:23}},{start:{line:137,column:27},end:{line:137,column:42}}],line:137}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d330c1f1b1ed4934c1c1314a540dcbd4532421f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_qh4xihsq=function(){return actualCoverage;};}return actualCoverage;}cov_qh4xihsq();const express=(cov_qh4xihsq().s[0]++,require("express"));const router=(cov_qh4xihsq().s[1]++,express.Router());const{ObjectID}=(cov_qh4xihsq().s[2]++,require("mongodb"));const User=(cov_qh4xihsq().s[3]++,require("../models/User"));// SECTION - CREATE GOAL
// Create a new goal
cov_qh4xihsq().s[4]++;router.post("/:userid",async(req,res)=>{cov_qh4xihsq().f[0]++;let userid=(cov_qh4xihsq().s[5]++,req.params.userid);let errors=(cov_qh4xihsq().s[6]++,[]);cov_qh4xihsq().s[7]++;if(!validID(userid)){cov_qh4xihsq().b[0][0]++;cov_qh4xihsq().s[8]++;errors.push("a valid userid must be set as a url parameter");}else{cov_qh4xihsq().b[0][1]++;}cov_qh4xihsq().s[9]++;if(errors.length>0){cov_qh4xihsq().b[1][0]++;cov_qh4xihsq().s[10]++;console.log("ERROR ",errors);cov_qh4xihsq().s[11]++;res.status(400).send(errors);cov_qh4xihsq().s[12]++;return;}else{cov_qh4xihsq().b[1][1]++;}let{title,priority}=(cov_qh4xihsq().s[13]++,req.body);let goal=(cov_qh4xihsq().s[14]++,{_id:new ObjectID(),title,priority,created:new Date()});cov_qh4xihsq().s[15]++;await User.findByIdAndUpdate(userid,{$push:{goals:goal}}).then(user=>{cov_qh4xihsq().f[1]++;cov_qh4xihsq().s[16]++;if(!user){cov_qh4xihsq().b[2][0]++;cov_qh4xihsq().s[17]++;errors.push("no user was found for the given user id");}else{cov_qh4xihsq().b[2][1]++;}}).catch(err=>{cov_qh4xihsq().f[2]++;cov_qh4xihsq().s[18]++;return console.error(err);});cov_qh4xihsq().s[19]++;if(errors.length>0){cov_qh4xihsq().b[3][0]++;cov_qh4xihsq().s[20]++;console.log("ERROR ",errors);cov_qh4xihsq().s[21]++;res.status(400).send(errors);}else{cov_qh4xihsq().b[3][1]++;cov_qh4xihsq().s[22]++;res.status(201).send(goal);}});// !SECTION
// SECTION - FETCH ALL GOALS
// Fetch all goals
cov_qh4xihsq().s[23]++;router.get("/:userid",async(req,res)=>{cov_qh4xihsq().f[3]++;let userid=(cov_qh4xihsq().s[24]++,req.params.userid);let goals=(cov_qh4xihsq().s[25]++,[]);let errors=(cov_qh4xihsq().s[26]++,[]);cov_qh4xihsq().s[27]++;if(!validID(userid)){cov_qh4xihsq().b[4][0]++;cov_qh4xihsq().s[28]++;errors.push("a valid userid must be set as a url parameter");}else{cov_qh4xihsq().b[4][1]++;}cov_qh4xihsq().s[29]++;if(errors.length>0){cov_qh4xihsq().b[5][0]++;cov_qh4xihsq().s[30]++;res.status(400).send(errors);cov_qh4xihsq().s[31]++;return;}else{cov_qh4xihsq().b[5][1]++;}cov_qh4xihsq().s[32]++;await User.findById(userid).then(user=>{cov_qh4xihsq().f[4]++;cov_qh4xihsq().s[33]++;if(user){cov_qh4xihsq().b[6][0]++;cov_qh4xihsq().s[34]++;goals=user.goals;}else{cov_qh4xihsq().b[6][1]++;cov_qh4xihsq().s[35]++;errors.push("no user found for given user id");}}).catch(err=>{cov_qh4xihsq().f[5]++;cov_qh4xihsq().s[36]++;return console.error(err);});cov_qh4xihsq().s[37]++;if(errors.length>0){cov_qh4xihsq().b[7][0]++;cov_qh4xihsq().s[38]++;res.status(400).send(errors);}else{cov_qh4xihsq().b[7][1]++;cov_qh4xihsq().s[39]++;res.status(200).send(goals);}});// !SECTION
// SECTION - FETCH GOAL
// Fetch a goal
cov_qh4xihsq().s[40]++;router.get("/:userid/:goalid",async(req,res)=>{cov_qh4xihsq().f[6]++;let{userid,goalid}=(cov_qh4xihsq().s[41]++,req.params);let goal=(cov_qh4xihsq().s[42]++,null);let errors=(cov_qh4xihsq().s[43]++,[]);cov_qh4xihsq().s[44]++;if((cov_qh4xihsq().b[9][0]++,userid==undefined)||(cov_qh4xihsq().b[9][1]++,userid.length!=24)){cov_qh4xihsq().b[8][0]++;cov_qh4xihsq().s[45]++;errors.push("a valid userid must be set as a url parameter");}else{cov_qh4xihsq().b[8][1]++;}cov_qh4xihsq().s[46]++;if((cov_qh4xihsq().b[11][0]++,goalid==undefined)||(cov_qh4xihsq().b[11][1]++,goalid.length!=24)){cov_qh4xihsq().b[10][0]++;cov_qh4xihsq().s[47]++;errors.push("a valid goalid must be set as a url parameter");}else{cov_qh4xihsq().b[10][1]++;}cov_qh4xihsq().s[48]++;if(errors.length>0){cov_qh4xihsq().b[12][0]++;cov_qh4xihsq().s[49]++;res.status(400).send(errors);cov_qh4xihsq().s[50]++;return;}else{cov_qh4xihsq().b[12][1]++;}cov_qh4xihsq().s[51]++;await User.findById(userid).then(user=>{cov_qh4xihsq().f[7]++;cov_qh4xihsq().s[52]++;if(user){cov_qh4xihsq().b[13][0]++;cov_qh4xihsq().s[53]++;// User found
for(g of user.goals){cov_qh4xihsq().s[54]++;if(g._id==goalid){cov_qh4xihsq().b[14][0]++;cov_qh4xihsq().s[55]++;// Goal found
goal=g;cov_qh4xihsq().s[56]++;break;}else{cov_qh4xihsq().b[14][1]++;}}cov_qh4xihsq().s[57]++;if(goal==null){cov_qh4xihsq().b[15][0]++;cov_qh4xihsq().s[58]++;errors.push("no goal with the given goalid was found for this user");}else{cov_qh4xihsq().b[15][1]++;}}else{cov_qh4xihsq().b[13][1]++;cov_qh4xihsq().s[59]++;errors.push("no user found for given user id");}}).catch(err=>{cov_qh4xihsq().f[8]++;cov_qh4xihsq().s[60]++;return console.error(err);});cov_qh4xihsq().s[61]++;if(errors.length>0){cov_qh4xihsq().b[16][0]++;cov_qh4xihsq().s[62]++;res.status(400).send(errors);}else{cov_qh4xihsq().b[16][1]++;cov_qh4xihsq().s[63]++;res.status(200).send(goal);}});// !SECTION
// TODO - DELETE GOAL
// TODO - UPDATE GOAL
cov_qh4xihsq().s[64]++;const validID=id=>{cov_qh4xihsq().f[9]++;cov_qh4xihsq().s[65]++;if((cov_qh4xihsq().b[18][0]++,id==undefined)||(cov_qh4xihsq().b[18][1]++,id.length!=24)){cov_qh4xihsq().b[17][0]++;cov_qh4xihsq().s[66]++;return false;}else{cov_qh4xihsq().b[17][1]++;}cov_qh4xihsq().s[67]++;return true;// More validation
};cov_qh4xihsq().s[68]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdvYWxzLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiT2JqZWN0SUQiLCJVc2VyIiwicG9zdCIsInJlcSIsInJlcyIsInVzZXJpZCIsInBhcmFtcyIsImVycm9ycyIsInZhbGlkSUQiLCJwdXNoIiwibGVuZ3RoIiwiY29uc29sZSIsImxvZyIsInN0YXR1cyIsInNlbmQiLCJ0aXRsZSIsInByaW9yaXR5IiwiYm9keSIsImdvYWwiLCJfaWQiLCJjcmVhdGVkIiwiRGF0ZSIsImZpbmRCeUlkQW5kVXBkYXRlIiwiJHB1c2giLCJnb2FscyIsInRoZW4iLCJ1c2VyIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsImdldCIsImZpbmRCeUlkIiwiZ29hbGlkIiwidW5kZWZpbmVkIiwiZyIsImlkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Iit1VUFlWTt1RkFmWixLQUFNQSxDQUFBQSxPQUFPLHdCQUFHQyxPQUFPLENBQUMsU0FBRCxDQUFWLENBQWIsQ0FDQSxLQUFNQyxDQUFBQSxNQUFNLHdCQUFHRixPQUFPLENBQUNHLE1BQVIsRUFBSCxDQUFaLENBQ0EsS0FBTSxDQUFFQyxRQUFGLHlCQUFlSCxPQUFPLENBQUMsU0FBRCxDQUF0QixDQUFOLENBRUEsS0FBTUksQ0FBQUEsSUFBSSx3QkFBR0osT0FBTyxDQUFDLGdCQUFELENBQVYsQ0FBVixDQUVBO0FBQ0E7c0JBQ0FDLE1BQU0sQ0FBQ0ksSUFBUCxDQUFZLFVBQVosQ0FBd0IsTUFBT0MsR0FBUCxDQUFZQyxHQUFaLEdBQW9CLHVCQUN4QyxHQUFJQyxDQUFBQSxNQUFNLHdCQUFHRixHQUFHLENBQUNHLE1BQUosQ0FBV0QsTUFBZCxDQUFWLENBQ0EsR0FBSUUsQ0FBQUEsTUFBTSx3QkFBRyxFQUFILENBQVYsQ0FGd0Msc0JBSXhDLEdBQUksQ0FBQ0MsT0FBTyxDQUFDSCxNQUFELENBQVosQ0FBc0IsZ0RBQ2xCRSxNQUFNLENBQUNFLElBQVAsQ0FBWSwrQ0FB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UixDQUFBQSxJQUFJLENBQUNGLEtBQWYsQ0FBc0Isd0JBQ2xCLEdBQUlVLENBQUMsQ0FBQ2YsR0FBRixFQUFTYSxNQUFiLENBQXFCLGtEQUNqQjtBQUNBZCxJQUFJLENBQUdnQixDQUFQLENBRmlCLHVCQUdqQixNQUNILENBSkQsZ0NBS0gsQ0FSSyx1QkFTTixHQUFJaEIsSUFBSSxFQUFJLElBQVosQ0FBa0Isa0RBQ2RYLE1BQU0sQ0FBQ0UsSUFBUCxDQUNJLHVEQURKLEVBR0gsQ0FKRCxnQ0FLSCxDQWRELElBY08sa0RBQ0hGLE1BQU0sQ0FBQ0UsSUFBUCxDQUFZLGlDQUFaLEVBQ0gsQ0FDSixDQW5CQyxFQW9CRGtCLEtBcEJDLENBb0JNQyxHQUFELEVBQVMsb0RBQUFqQixDQUFBQSxPQUFPLENBQUNrQixLQUFSLENBQWNELEdBQWQsRUFBa0IsQ0FwQmhDLENBQU4sQ0FoQitDLHVCQXNDL0MsR0FBSXJCLE1BQU0sQ0FBQ0csTUFBUCxDQUFnQixDQUFwQixDQUF1QixrREFDbkJOLEdBQUcsQ0FBQ1MsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCUCxNQUFyQixFQUNILENBRkQsSUFFTyxrREFDSEgsR0FBRyxDQUFDUyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJJLElBQXJCLEVBQ0gsQ0FDSixDQTNDRCxFQTRDQTtBQUNBO0FBQ0E7dUJBQ0EsS0FBTVYsQ0FBQUEsT0FBTyxDQUFJMkIsRUFBRCxFQUFRLDhDQUNwQixHQUFJLDJCQUFBQSxFQUFFLEVBQUlGLFNBQU4sOEJBQW1CRSxFQUFFLENBQUN6QixNQUFILEVBQWEsRUFBaEMsQ0FBSixDQUF3QyxrREFDcEMsTUFBTyxNQUFQLENBQ0gsQ0FGRCxnQ0FEb0IsdUJBSXBCLE1BQU8sS0FBUCxDQUNBO0FBQ0gsQ0FORCxDLHVCQVFBMEIsTUFBTSxDQUFDQyxPQUFQLENBQWlCdkMsTUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbmNvbnN0IHsgT2JqZWN0SUQgfSA9IHJlcXVpcmUoXCJtb25nb2RiXCIpO1xyXG5cclxuY29uc3QgVXNlciA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvVXNlclwiKTtcclxuXHJcbi8vIFNFQ1RJT04gLSBDUkVBVEUgR09BTFxyXG4vLyBDcmVhdGUgYSBuZXcgZ29hbFxyXG5yb3V0ZXIucG9zdChcIi86dXNlcmlkXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgbGV0IHVzZXJpZCA9IHJlcS5wYXJhbXMudXNlcmlkO1xyXG4gICAgbGV0IGVycm9ycyA9IFtdO1xyXG5cclxuICAgIGlmICghdmFsaWRJRCh1c2VyaWQpKSB7XHJcbiAgICAgICAgZXJyb3JzLnB1c2goXCJhIHZhbGlkIHVzZXJpZCBtdXN0IGJlIHNldCBhcyBhIHVybCBwYXJhbWV0ZXJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiBcIiwgZXJyb3JzKTtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMCkuc2VuZChlcnJvcnMpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgeyB0aXRsZSwgcHJpb3JpdHkgfSA9IHJlcS5ib2R5O1xyXG4gICAgbGV0IGdvYWwgPSB7XHJcbiAgICAgICAgX2lkOiBuZXcgT2JqZWN0SUQoKSxcclxuICAgICAgICB0aXRsZSxcclxuICAgICAgICBwcmlvcml0eSxcclxuICAgICAgICBjcmVhdGVkOiBuZXcgRGF0ZSgpLFxyXG4gICAgfTtcclxuXHJcbiAgICBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHVzZXJpZCwge1xyXG4gICAgICAgICRwdXNoOiB7XHJcbiAgICAgICAgICAgIGdvYWxzOiBnb2FsLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAgIC50aGVuKCh1c2VyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdXNlcikge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJubyB1c2VyIHdhcyBmb3VuZCBmb3IgdGhlIGdpdmVuIHVzZXIgaWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG5cclxuICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgXCIsIGVycm9ycyk7XHJcblxyXG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGVycm9ycyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5zZW5kKGdvYWwpO1xyXG4gICAgfVxyXG59KTtcclxuLy8gIVNFQ1RJT05cclxuXHJcbi8vIFNFQ1RJT04gLSBGRVRDSCBBTEwgR09BTFNcclxuLy8gRmV0Y2ggYWxsIGdvYWxzXHJcbnJvdXRlci5nZXQoXCIvOnVzZXJpZFwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGxldCB1c2VyaWQgPSByZXEucGFyYW1zLnVzZXJpZDtcclxuICAgIGxldCBnb2FscyA9IFtdO1xyXG4gICAgbGV0IGVycm9ycyA9IFtdO1xyXG5cclxuICAgIGlmICghdmFsaWRJRCh1c2VyaWQpKSB7XHJcbiAgICAgICAgZXJyb3JzLnB1c2goXCJhIHZhbGlkIHVzZXJpZCBtdXN0IGJlIHNldCBhcyBhIHVybCBwYXJhbWV0ZXJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyb3JzKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgVXNlci5maW5kQnlJZCh1c2VyaWQpXHJcbiAgICAgICAgLnRoZW4oKHVzZXIpID0+IHtcclxuICAgICAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIGdvYWxzID0gdXNlci5nb2FscztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKFwibm8gdXNlciBmb3VuZCBmb3IgZ2l2ZW4gdXNlciBpZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcblxyXG4gICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyb3JzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoZ29hbHMpO1xyXG4gICAgfVxyXG59KTtcclxuLy8gIVNFQ1RJT05cclxuXHJcbi8vIFNFQ1RJT04gLSBGRVRDSCBHT0FMXHJcbi8vIEZldGNoIGEgZ29hbFxyXG5yb3V0ZXIuZ2V0KFwiLzp1c2VyaWQvOmdvYWxpZFwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGxldCB7IHVzZXJpZCwgZ29hbGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgbGV0IGdvYWwgPSBudWxsO1xyXG4gICAgbGV0IGVycm9ycyA9IFtdO1xyXG4gICAgaWYgKHVzZXJpZCA9PSB1bmRlZmluZWQgfHwgdXNlcmlkLmxlbmd0aCAhPSAyNCkge1xyXG4gICAgICAgIGVycm9ycy5wdXNoKFwiYSB2YWxpZCB1c2VyaWQgbXVzdCBiZSBzZXQgYXMgYSB1cmwgcGFyYW1ldGVyXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKGdvYWxpZCA9PSB1bmRlZmluZWQgfHwgZ29hbGlkLmxlbmd0aCAhPSAyNCkge1xyXG4gICAgICAgIGVycm9ycy5wdXNoKFwiYSB2YWxpZCBnb2FsaWQgbXVzdCBiZSBzZXQgYXMgYSB1cmwgcGFyYW1ldGVyXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGVycm9ycyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcmlkKVxyXG4gICAgICAgIC50aGVuKCh1c2VyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVc2VyIGZvdW5kXHJcbiAgICAgICAgICAgICAgICBmb3IgKGcgb2YgdXNlci5nb2Fscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnLl9pZCA9PSBnb2FsaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR29hbCBmb3VuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnb2FsID0gZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGdvYWwgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5vIGdvYWwgd2l0aCB0aGUgZ2l2ZW4gZ29hbGlkIHdhcyBmb3VuZCBmb3IgdGhpcyB1c2VyXCJcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJubyB1c2VyIGZvdW5kIGZvciBnaXZlbiB1c2VyIGlkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxuXHJcbiAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMCkuc2VuZChlcnJvcnMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChnb2FsKTtcclxuICAgIH1cclxufSk7XHJcbi8vICFTRUNUSU9OXHJcbi8vIFRPRE8gLSBERUxFVEUgR09BTFxyXG4vLyBUT0RPIC0gVVBEQVRFIEdPQUxcclxuY29uc3QgdmFsaWRJRCA9IChpZCkgPT4ge1xyXG4gICAgaWYgKGlkID09IHVuZGVmaW5lZCB8fCBpZC5sZW5ndGggIT0gMjQpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICAgIC8vIE1vcmUgdmFsaWRhdGlvblxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdfQ==