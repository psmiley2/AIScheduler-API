function cov_sx5ei3ogs(){var path="C:\\Users\\peter\\Desktop\\Files\\perhail\\server\\api.js";var hash="06e051af893dd3159fe3c674826c5e2b245d291e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\peter\\Desktop\\Files\\perhail\\server\\api.js",statementMap:{"0":{start:{line:4,column:16},end:{line:4,column:34}},"1":{start:{line:5,column:13},end:{line:5,column:28}},"2":{start:{line:6,column:19},end:{line:6,column:41}},"3":{start:{line:7,column:0},end:{line:7,column:27}},"4":{start:{line:8,column:15},end:{line:8,column:42}},"5":{start:{line:9,column:10},end:{line:9,column:19}},"6":{start:{line:10,column:11},end:{line:10,column:66}},"7":{start:{line:11,column:13},end:{line:11,column:28}},"8":{start:{line:12,column:19},end:{line:12,column:44}},"9":{start:{line:13,column:19},end:{line:13,column:44}},"10":{start:{line:14,column:19},end:{line:14,column:44}},"11":{start:{line:16,column:0},end:{line:16,column:52}},"12":{start:{line:17,column:0},end:{line:17,column:24}},"13":{start:{line:18,column:0},end:{line:22,column:2}},"14":{start:{line:24,column:0},end:{line:24,column:30}},"15":{start:{line:25,column:0},end:{line:25,column:30}},"16":{start:{line:26,column:0},end:{line:26,column:30}},"17":{start:{line:31,column:0},end:{line:33,column:3}},"18":{start:{line:32,column:4},end:{line:32,column:47}},"19":{start:{line:44,column:0},end:{line:75,column:3}},"20":{start:{line:45,column:17},end:{line:45,column:34}},"21":{start:{line:46,column:15},end:{line:46,column:18}},"22":{start:{line:47,column:4},end:{line:50,column:5}},"23":{start:{line:48,column:8},end:{line:48,column:79}},"24":{start:{line:49,column:8},end:{line:49,column:15}},"25":{start:{line:51,column:4},end:{line:51,column:34}},"26":{start:{line:52,column:21},end:{line:55,column:5}},"27":{start:{line:57,column:4},end:{line:65,column:44}},"28":{start:{line:59,column:12},end:{line:63,column:13}},"29":{start:{line:60,column:16},end:{line:60,column:27}},"30":{start:{line:62,column:16},end:{line:62,column:27}},"31":{start:{line:65,column:24},end:{line:65,column:42}},"32":{start:{line:66,column:4},end:{line:74,column:5}},"33":{start:{line:67,column:8},end:{line:67,column:42}},"34":{start:{line:68,column:11},end:{line:74,column:5}},"35":{start:{line:69,column:8},end:{line:71,column:10}},"36":{start:{line:73,column:8},end:{line:73,column:49}},"37":{start:{line:80,column:0},end:{line:107,column:3}},"38":{start:{line:81,column:17},end:{line:81,column:34}},"39":{start:{line:82,column:15},end:{line:82,column:18}},"40":{start:{line:83,column:22},end:{line:83,column:24}},"41":{start:{line:84,column:4},end:{line:87,column:5}},"42":{start:{line:85,column:8},end:{line:85,column:79}},"43":{start:{line:86,column:8},end:{line:86,column:15}},"44":{start:{line:88,column:4},end:{line:88,column:34}},"45":{start:{line:90,column:4},end:{line:98,column:11}},"46":{start:{line:92,column:12},end:{line:92,column:30}},"47":{start:{line:93,column:12},end:{line:93,column:35}},"48":{start:{line:96,column:12},end:{line:96,column:31}},"49":{start:{line:97,column:12},end:{line:97,column:23}},"50":{start:{line:100,column:4},end:{line:106,column:5}},"51":{start:{line:101,column:8},end:{line:101,column:43}},"52":{start:{line:103,column:8},end:{line:105,column:10}},"53":{start:{line:112,column:0},end:{line:146,column:3}},"54":{start:{line:113,column:17},end:{line:113,column:34}},"55":{start:{line:114,column:23},end:{line:114,column:46}},"56":{start:{line:115,column:15},end:{line:115,column:18}},"57":{start:{line:116,column:21},end:{line:116,column:23}},"58":{start:{line:117,column:4},end:{line:120,column:5}},"59":{start:{line:118,column:8},end:{line:118,column:79}},"60":{start:{line:119,column:8},end:{line:119,column:15}},"61":{start:{line:121,column:4},end:{line:126,column:5}},"62":{start:{line:122,column:8},end:{line:124,column:10}},"63":{start:{line:125,column:8},end:{line:125,column:15}},"64":{start:{line:127,column:4},end:{line:127,column:34}},"65":{start:{line:129,column:4},end:{line:137,column:11}},"66":{start:{line:131,column:12},end:{line:131,column:29}},"67":{start:{line:132,column:12},end:{line:132,column:35}},"68":{start:{line:135,column:12},end:{line:135,column:31}},"69":{start:{line:136,column:12},end:{line:136,column:23}},"70":{start:{line:139,column:4},end:{line:145,column:5}},"71":{start:{line:140,column:8},end:{line:140,column:42}},"72":{start:{line:142,column:8},end:{line:144,column:10}},"73":{start:{line:156,column:0},end:{line:188,column:3}},"74":{start:{line:157,column:17},end:{line:157,column:34}},"75":{start:{line:158,column:15},end:{line:158,column:18}},"76":{start:{line:159,column:4},end:{line:162,column:5}},"77":{start:{line:160,column:8},end:{line:160,column:79}},"78":{start:{line:161,column:8},end:{line:161,column:15}},"79":{start:{line:163,column:4},end:{line:163,column:34}},"80":{start:{line:164,column:16},end:{line:168,column:5}},"81":{start:{line:170,column:4},end:{line:178,column:44}},"82":{start:{line:172,column:12},end:{line:176,column:13}},"83":{start:{line:173,column:16},end:{line:173,column:27}},"84":{start:{line:175,column:16},end:{line:175,column:27}},"85":{start:{line:178,column:24},end:{line:178,column:42}},"86":{start:{line:179,column:4},end:{line:187,column:5}},"87":{start:{line:180,column:8},end:{line:180,column:37}},"88":{start:{line:181,column:11},end:{line:187,column:5}},"89":{start:{line:182,column:8},end:{line:184,column:10}},"90":{start:{line:186,column:8},end:{line:186,column:49}},"91":{start:{line:193,column:0},end:{line:220,column:3}},"92":{start:{line:194,column:17},end:{line:194,column:34}},"93":{start:{line:195,column:15},end:{line:195,column:18}},"94":{start:{line:196,column:17},end:{line:196,column:19}},"95":{start:{line:197,column:4},end:{line:200,column:5}},"96":{start:{line:198,column:8},end:{line:198,column:79}},"97":{start:{line:199,column:8},end:{line:199,column:15}},"98":{start:{line:201,column:4},end:{line:201,column:34}},"99":{start:{line:203,column:4},end:{line:211,column:11}},"100":{start:{line:205,column:12},end:{line:205,column:25}},"101":{start:{line:206,column:12},end:{line:206,column:35}},"102":{start:{line:209,column:12},end:{line:209,column:31}},"103":{start:{line:210,column:12},end:{line:210,column:23}},"104":{start:{line:213,column:4},end:{line:219,column:5}},"105":{start:{line:214,column:8},end:{line:214,column:38}},"106":{start:{line:216,column:8},end:{line:218,column:10}},"107":{start:{line:225,column:0},end:{line:259,column:3}},"108":{start:{line:226,column:17},end:{line:226,column:34}},"109":{start:{line:227,column:18},end:{line:227,column:36}},"110":{start:{line:228,column:15},end:{line:228,column:18}},"111":{start:{line:229,column:16},end:{line:229,column:18}},"112":{start:{line:230,column:4},end:{line:233,column:5}},"113":{start:{line:231,column:8},end:{line:231,column:79}},"114":{start:{line:232,column:8},end:{line:232,column:15}},"115":{start:{line:234,column:4},end:{line:239,column:5}},"116":{start:{line:235,column:8},end:{line:237,column:10}},"117":{start:{line:238,column:8},end:{line:238,column:15}},"118":{start:{line:240,column:4},end:{line:240,column:34}},"119":{start:{line:242,column:4},end:{line:250,column:11}},"120":{start:{line:244,column:12},end:{line:244,column:24}},"121":{start:{line:245,column:12},end:{line:245,column:35}},"122":{start:{line:248,column:12},end:{line:248,column:31}},"123":{start:{line:249,column:12},end:{line:249,column:23}},"124":{start:{line:252,column:4},end:{line:258,column:5}},"125":{start:{line:253,column:8},end:{line:253,column:37}},"126":{start:{line:255,column:8},end:{line:257,column:10}},"127":{start:{line:278,column:0},end:{line:289,column:2}},"128":{start:{line:279,column:4},end:{line:287,column:11}},"129":{start:{line:281,column:12},end:{line:281,column:41}},"130":{start:{line:282,column:12},end:{line:282,column:40}},"131":{start:{line:285,column:12},end:{line:285,column:31}},"132":{start:{line:286,column:12},end:{line:286,column:28}},"133":{start:{line:288,column:4},end:{line:288,column:15}},"134":{start:{line:293,column:0},end:{line:299,column:2}},"135":{start:{line:294,column:4},end:{line:296,column:5}},"136":{start:{line:295,column:8},end:{line:295,column:21}},"137":{start:{line:297,column:4},end:{line:297,column:16}},"138":{start:{line:301,column:0},end:{line:301,column:23}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:31,column:13},end:{line:31,column:14}},loc:{start:{line:31,column:27},end:{line:33,column:1}},line:31},"1":{name:"(anonymous_1)",decl:{start:{line:44,column:33},end:{line:44,column:34}},loc:{start:{line:44,column:53},end:{line:75,column:1}},line:44},"2":{name:"(anonymous_2)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:23},end:{line:64,column:9}},line:58},"3":{name:"(anonymous_3)",decl:{start:{line:65,column:15},end:{line:65,column:16}},loc:{start:{line:65,column:24},end:{line:65,column:42}},line:65},"4":{name:"(anonymous_4)",decl:{start:{line:80,column:32},end:{line:80,column:33}},loc:{start:{line:80,column:52},end:{line:107,column:1}},line:80},"5":{name:"(anonymous_5)",decl:{start:{line:91,column:14},end:{line:91,column:15}},loc:{start:{line:91,column:23},end:{line:94,column:9}},line:91},"6":{name:"(anonymous_6)",decl:{start:{line:95,column:15},end:{line:95,column:16}},loc:{start:{line:95,column:24},end:{line:98,column:9}},line:95},"7":{name:"(anonymous_7)",decl:{start:{line:112,column:46},end:{line:112,column:47}},loc:{start:{line:112,column:66},end:{line:146,column:1}},line:112},"8":{name:"(anonymous_8)",decl:{start:{line:130,column:14},end:{line:130,column:15}},loc:{start:{line:130,column:23},end:{line:133,column:9}},line:130},"9":{name:"(anonymous_9)",decl:{start:{line:134,column:15},end:{line:134,column:16}},loc:{start:{line:134,column:24},end:{line:137,column:9}},line:134},"10":{name:"(anonymous_10)",decl:{start:{line:156,column:28},end:{line:156,column:29}},loc:{start:{line:156,column:48},end:{line:188,column:1}},line:156},"11":{name:"(anonymous_11)",decl:{start:{line:171,column:14},end:{line:171,column:15}},loc:{start:{line:171,column:23},end:{line:177,column:9}},line:171},"12":{name:"(anonymous_12)",decl:{start:{line:178,column:15},end:{line:178,column:16}},loc:{start:{line:178,column:24},end:{line:178,column:42}},line:178},"13":{name:"(anonymous_13)",decl:{start:{line:193,column:27},end:{line:193,column:28}},loc:{start:{line:193,column:47},end:{line:220,column:1}},line:193},"14":{name:"(anonymous_14)",decl:{start:{line:204,column:14},end:{line:204,column:15}},loc:{start:{line:204,column:23},end:{line:207,column:9}},line:204},"15":{name:"(anonymous_15)",decl:{start:{line:208,column:15},end:{line:208,column:16}},loc:{start:{line:208,column:24},end:{line:211,column:9}},line:208},"16":{name:"(anonymous_16)",decl:{start:{line:225,column:36},end:{line:225,column:37}},loc:{start:{line:225,column:56},end:{line:259,column:1}},line:225},"17":{name:"(anonymous_17)",decl:{start:{line:243,column:14},end:{line:243,column:15}},loc:{start:{line:243,column:23},end:{line:246,column:9}},line:243},"18":{name:"(anonymous_18)",decl:{start:{line:247,column:15},end:{line:247,column:16}},loc:{start:{line:247,column:24},end:{line:250,column:9}},line:247},"19":{name:"(anonymous_19)",decl:{start:{line:278,column:14},end:{line:278,column:15}},loc:{start:{line:278,column:29},end:{line:289,column:1}},line:278},"20":{name:"(anonymous_20)",decl:{start:{line:280,column:14},end:{line:280,column:15}},loc:{start:{line:280,column:20},end:{line:283,column:9}},line:280},"21":{name:"(anonymous_21)",decl:{start:{line:284,column:15},end:{line:284,column:16}},loc:{start:{line:284,column:24},end:{line:287,column:9}},line:284},"22":{name:"(anonymous_22)",decl:{start:{line:293,column:10},end:{line:293,column:11}},loc:{start:{line:293,column:18},end:{line:299,column:1}},line:293}},branchMap:{"0":{loc:{start:{line:47,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:50,column:5}},{start:{line:47,column:4},end:{line:50,column:5}}],line:47},"1":{loc:{start:{line:59,column:12},end:{line:63,column:13}},type:"if",locations:[{start:{line:59,column:12},end:{line:63,column:13}},{start:{line:59,column:12},end:{line:63,column:13}}],line:59},"2":{loc:{start:{line:66,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:66,column:4},end:{line:74,column:5}},{start:{line:66,column:4},end:{line:74,column:5}}],line:66},"3":{loc:{start:{line:68,column:11},end:{line:74,column:5}},type:"if",locations:[{start:{line:68,column:11},end:{line:74,column:5}},{start:{line:68,column:11},end:{line:74,column:5}}],line:68},"4":{loc:{start:{line:84,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:84,column:4},end:{line:87,column:5}},{start:{line:84,column:4},end:{line:87,column:5}}],line:84},"5":{loc:{start:{line:93,column:19},end:{line:93,column:34}},type:"cond-expr",locations:[{start:{line:93,column:25},end:{line:93,column:28}},{start:{line:93,column:31},end:{line:93,column:34}}],line:93},"6":{loc:{start:{line:100,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:106,column:5}},{start:{line:100,column:4},end:{line:106,column:5}}],line:100},"7":{loc:{start:{line:117,column:4},end:{line:120,column:5}},type:"if",locations:[{start:{line:117,column:4},end:{line:120,column:5}},{start:{line:117,column:4},end:{line:120,column:5}}],line:117},"8":{loc:{start:{line:121,column:4},end:{line:126,column:5}},type:"if",locations:[{start:{line:121,column:4},end:{line:126,column:5}},{start:{line:121,column:4},end:{line:126,column:5}}],line:121},"9":{loc:{start:{line:132,column:19},end:{line:132,column:34}},type:"cond-expr",locations:[{start:{line:132,column:25},end:{line:132,column:28}},{start:{line:132,column:31},end:{line:132,column:34}}],line:132},"10":{loc:{start:{line:139,column:4},end:{line:145,column:5}},type:"if",locations:[{start:{line:139,column:4},end:{line:145,column:5}},{start:{line:139,column:4},end:{line:145,column:5}}],line:139},"11":{loc:{start:{line:159,column:4},end:{line:162,column:5}},type:"if",locations:[{start:{line:159,column:4},end:{line:162,column:5}},{start:{line:159,column:4},end:{line:162,column:5}}],line:159},"12":{loc:{start:{line:172,column:12},end:{line:176,column:13}},type:"if",locations:[{start:{line:172,column:12},end:{line:176,column:13}},{start:{line:172,column:12},end:{line:176,column:13}}],line:172},"13":{loc:{start:{line:179,column:4},end:{line:187,column:5}},type:"if",locations:[{start:{line:179,column:4},end:{line:187,column:5}},{start:{line:179,column:4},end:{line:187,column:5}}],line:179},"14":{loc:{start:{line:181,column:11},end:{line:187,column:5}},type:"if",locations:[{start:{line:181,column:11},end:{line:187,column:5}},{start:{line:181,column:11},end:{line:187,column:5}}],line:181},"15":{loc:{start:{line:197,column:4},end:{line:200,column:5}},type:"if",locations:[{start:{line:197,column:4},end:{line:200,column:5}},{start:{line:197,column:4},end:{line:200,column:5}}],line:197},"16":{loc:{start:{line:206,column:19},end:{line:206,column:34}},type:"cond-expr",locations:[{start:{line:206,column:25},end:{line:206,column:28}},{start:{line:206,column:31},end:{line:206,column:34}}],line:206},"17":{loc:{start:{line:213,column:4},end:{line:219,column:5}},type:"if",locations:[{start:{line:213,column:4},end:{line:219,column:5}},{start:{line:213,column:4},end:{line:219,column:5}}],line:213},"18":{loc:{start:{line:230,column:4},end:{line:233,column:5}},type:"if",locations:[{start:{line:230,column:4},end:{line:233,column:5}},{start:{line:230,column:4},end:{line:233,column:5}}],line:230},"19":{loc:{start:{line:234,column:4},end:{line:239,column:5}},type:"if",locations:[{start:{line:234,column:4},end:{line:239,column:5}},{start:{line:234,column:4},end:{line:239,column:5}}],line:234},"20":{loc:{start:{line:245,column:19},end:{line:245,column:34}},type:"cond-expr",locations:[{start:{line:245,column:25},end:{line:245,column:28}},{start:{line:245,column:31},end:{line:245,column:34}}],line:245},"21":{loc:{start:{line:252,column:4},end:{line:258,column:5}},type:"if",locations:[{start:{line:252,column:4},end:{line:258,column:5}},{start:{line:252,column:4},end:{line:258,column:5}}],line:252},"22":{loc:{start:{line:294,column:4},end:{line:296,column:5}},type:"if",locations:[{start:{line:294,column:4},end:{line:296,column:5}},{start:{line:294,column:4},end:{line:296,column:5}}],line:294},"23":{loc:{start:{line:294,column:8},end:{line:294,column:42}},type:"binary-expr",locations:[{start:{line:294,column:8},end:{line:294,column:23}},{start:{line:294,column:27},end:{line:294,column:42}}],line:294}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"06e051af893dd3159fe3c674826c5e2b245d291e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_sx5ei3ogs=function(){return actualCoverage;};}return actualCoverage;}cov_sx5ei3ogs();/* -------------------------------------------------------------------------- */ /*                                    SetUp                                   */ /* -------------------------------------------------------------------------- */const express=(cov_sx5ei3ogs().s[0]++,require("express"));const path=(cov_sx5ei3ogs().s[1]++,require("path"));const bodyParser=(cov_sx5ei3ogs().s[2]++,require("body-parser"));cov_sx5ei3ogs().s[3]++;require("dotenv").config();let ObjectID=(cov_sx5ei3ogs().s[4]++,require("mongodb").ObjectID);let app=(cov_sx5ei3ogs().s[5]++,express());const DB=(cov_sx5ei3ogs().s[6]++,require(path.join(__dirname,"modules","database.js")));const cors=(cov_sx5ei3ogs().s[7]++,require("cors"));const userRoutes=(cov_sx5ei3ogs().s[8]++,require("./routes/users"));const taskRoutes=(cov_sx5ei3ogs().s[9]++,require("./routes/tasks"));const goalRoutes=(cov_sx5ei3ogs().s[10]++,require("./routes/goals"));cov_sx5ei3ogs().s[11]++;app.use(bodyParser.urlencoded({extended:false}));cov_sx5ei3ogs().s[12]++;app.use(express.json());cov_sx5ei3ogs().s[13]++;app.use(cors({origin:["http://localhost:3000"]}));cov_sx5ei3ogs().s[14]++;app.use("/users",userRoutes);cov_sx5ei3ogs().s[15]++;app.use("/tasks",taskRoutes);cov_sx5ei3ogs().s[16]++;app.use("/goals",goalRoutes);/* -------------------------------------------------------------------------- */ /*                                  Endpoints                                 */ /* -------------------------------------------------------------------------- */cov_sx5ei3ogs().s[17]++;app.get("/",(req,res)=>{cov_sx5ei3ogs().f[0]++;cov_sx5ei3ogs().s[18]++;res.status(200).send("server is running!");});/* ----------------------------- Goals Endpoint ----------------------------- */ // SECTION - GOALS
// !SECTION
/* -------------------------- Preferences Endpoint -------------------------- */ // SECTION - PREFERENCES
// SECTION - CREATE PREFERENCES
// Add a new preference
cov_sx5ei3ogs().s[19]++;app.post("/preferences/:userid",async(req,res)=>{cov_sx5ei3ogs().f[1]++;let userid=(cov_sx5ei3ogs().s[20]++,req.params.userid);let code=(cov_sx5ei3ogs().s[21]++,400);cov_sx5ei3ogs().s[22]++;if(!validID(userid)){cov_sx5ei3ogs().b[0][0]++;cov_sx5ei3ogs().s[23]++;res.status(code).send("a valid userid must be set as a url parameter");cov_sx5ei3ogs().s[24]++;return;}else{cov_sx5ei3ogs().b[0][1]++;}cov_sx5ei3ogs().s[25]++;userid=new ObjectID(userid);let preference=(cov_sx5ei3ogs().s[26]++,{_id:new ObjectID(),title:req.body.title// TODO - if no title is given make it ""
});cov_sx5ei3ogs().s[27]++;await DB.insertPreference(userid,preference).then(res=>{cov_sx5ei3ogs().f[2]++;cov_sx5ei3ogs().s[28]++;if(res>=1){cov_sx5ei3ogs().b[1][0]++;cov_sx5ei3ogs().s[29]++;code=201;}else{cov_sx5ei3ogs().b[1][1]++;cov_sx5ei3ogs().s[30]++;code=400;}}).catch(err=>{cov_sx5ei3ogs().f[3]++;cov_sx5ei3ogs().s[31]++;return console.error(err);});cov_sx5ei3ogs().s[32]++;if(code==201){cov_sx5ei3ogs().b[2][0]++;cov_sx5ei3ogs().s[33]++;res.status(code).send(preference);}else{cov_sx5ei3ogs().b[2][1]++;cov_sx5ei3ogs().s[34]++;if(code==400){cov_sx5ei3ogs().b[3][0]++;cov_sx5ei3ogs().s[35]++;res.status(code).send("could not find a match in the database based on passed in ID");}else{cov_sx5ei3ogs().b[3][1]++;cov_sx5ei3ogs().s[36]++;res.status(500).send("unexpected error");}}});// !SECTION
// SECTION - FETCH ALL PREFERENCES
// Fetch all preferences
cov_sx5ei3ogs().s[37]++;app.get("/preferences/:userid",async(req,res)=>{cov_sx5ei3ogs().f[4]++;let userid=(cov_sx5ei3ogs().s[38]++,req.params.userid);let code=(cov_sx5ei3ogs().s[39]++,400);let preferences=(cov_sx5ei3ogs().s[40]++,[]);cov_sx5ei3ogs().s[41]++;if(!validID(userid)){cov_sx5ei3ogs().b[4][0]++;cov_sx5ei3ogs().s[42]++;res.status(code).send("a valid userid must be set as a url parameter");cov_sx5ei3ogs().s[43]++;return;}else{cov_sx5ei3ogs().b[4][1]++;}cov_sx5ei3ogs().s[44]++;userid=new ObjectID(userid);cov_sx5ei3ogs().s[45]++;await DB.fetchAllPreferences(userid).then(res=>{cov_sx5ei3ogs().f[5]++;cov_sx5ei3ogs().s[46]++;preferences=res;cov_sx5ei3ogs().s[47]++;code=res?(cov_sx5ei3ogs().b[5][0]++,200):(cov_sx5ei3ogs().b[5][1]++,400);}).catch(err=>{cov_sx5ei3ogs().f[6]++;cov_sx5ei3ogs().s[48]++;console.error(err);cov_sx5ei3ogs().s[49]++;code=400;});cov_sx5ei3ogs().s[50]++;if(code==200){cov_sx5ei3ogs().b[6][0]++;cov_sx5ei3ogs().s[51]++;res.status(code).send(preferences);}else{cov_sx5ei3ogs().b[6][1]++;cov_sx5ei3ogs().s[52]++;res.status(code).send("Could not find a match to given IDs in the DB. Or else check databse connection");}});// !SECTION
// SECTION - FETCH PREFERENCE
// Fetch a preference
cov_sx5ei3ogs().s[53]++;app.get("/preferences/:userid/:preferenceid",async(req,res)=>{cov_sx5ei3ogs().f[7]++;let userid=(cov_sx5ei3ogs().s[54]++,req.params.userid);let preferenceid=(cov_sx5ei3ogs().s[55]++,req.params.preferenceid);let code=(cov_sx5ei3ogs().s[56]++,400);let preference=(cov_sx5ei3ogs().s[57]++,{});cov_sx5ei3ogs().s[58]++;if(!validID(userid)){cov_sx5ei3ogs().b[7][0]++;cov_sx5ei3ogs().s[59]++;res.status(code).send("a valid userid must be set as a url parameter");cov_sx5ei3ogs().s[60]++;return;}else{cov_sx5ei3ogs().b[7][1]++;}cov_sx5ei3ogs().s[61]++;if(!validID(preferenceid)){cov_sx5ei3ogs().b[8][0]++;cov_sx5ei3ogs().s[62]++;res.status(code).send("a valid preferenceid must be set as a url parameter");cov_sx5ei3ogs().s[63]++;return;}else{cov_sx5ei3ogs().b[8][1]++;}cov_sx5ei3ogs().s[64]++;userid=new ObjectID(userid);cov_sx5ei3ogs().s[65]++;await DB.fetchPreference(userid,preferenceid).then(res=>{cov_sx5ei3ogs().f[8]++;cov_sx5ei3ogs().s[66]++;preference=res;cov_sx5ei3ogs().s[67]++;code=res?(cov_sx5ei3ogs().b[9][0]++,200):(cov_sx5ei3ogs().b[9][1]++,400);}).catch(err=>{cov_sx5ei3ogs().f[9]++;cov_sx5ei3ogs().s[68]++;console.error(err);cov_sx5ei3ogs().s[69]++;code=400;});cov_sx5ei3ogs().s[70]++;if(code==200){cov_sx5ei3ogs().b[10][0]++;cov_sx5ei3ogs().s[71]++;res.status(code).send(preference);}else{cov_sx5ei3ogs().b[10][1]++;cov_sx5ei3ogs().s[72]++;res.status(code).send("Could not find a match to given IDs in the DB. Or else check databse connection");}});// !SECTION
// TODO - DELETE PREFERENCE
// TODO - UPDATE PREFERENCE
// !SECTION
/* ----------------------------- Events Endpoint ---------------------------- */ // SECTION - EVENTS
// SECTION - CREATE EVENTS
// Add a new event
cov_sx5ei3ogs().s[73]++;app.post("/events/:userid",async(req,res)=>{cov_sx5ei3ogs().f[10]++;let userid=(cov_sx5ei3ogs().s[74]++,req.params.userid);let code=(cov_sx5ei3ogs().s[75]++,400);cov_sx5ei3ogs().s[76]++;if(!validID(userid)){cov_sx5ei3ogs().b[11][0]++;cov_sx5ei3ogs().s[77]++;res.status(code).send("a valid userid must be set as a url parameter");cov_sx5ei3ogs().s[78]++;return;}else{cov_sx5ei3ogs().b[11][1]++;}cov_sx5ei3ogs().s[79]++;userid=new ObjectID(userid);let event=(cov_sx5ei3ogs().s[80]++,{_id:new ObjectID(),title:req.body.title// TODO - Other fields such as start time, end time, category, ect.
});cov_sx5ei3ogs().s[81]++;await DB.insertEvent(userid,event).then(res=>{cov_sx5ei3ogs().f[11]++;cov_sx5ei3ogs().s[82]++;if(res>=1){cov_sx5ei3ogs().b[12][0]++;cov_sx5ei3ogs().s[83]++;code=201;}else{cov_sx5ei3ogs().b[12][1]++;cov_sx5ei3ogs().s[84]++;code=400;}}).catch(err=>{cov_sx5ei3ogs().f[12]++;cov_sx5ei3ogs().s[85]++;return console.error(err);});cov_sx5ei3ogs().s[86]++;if(code==201){cov_sx5ei3ogs().b[13][0]++;cov_sx5ei3ogs().s[87]++;res.status(code).send(event);}else{cov_sx5ei3ogs().b[13][1]++;cov_sx5ei3ogs().s[88]++;if(code==400){cov_sx5ei3ogs().b[14][0]++;cov_sx5ei3ogs().s[89]++;res.status(code).send("could not find a match in the database based on passed in ID");}else{cov_sx5ei3ogs().b[14][1]++;cov_sx5ei3ogs().s[90]++;res.status(500).send("unexpected error");}}});// !SECTION
// SECTION - FETCH ALL EVENTS
// Fetch all events
cov_sx5ei3ogs().s[91]++;app.get("/events/:userid",async(req,res)=>{cov_sx5ei3ogs().f[13]++;let userid=(cov_sx5ei3ogs().s[92]++,req.params.userid);let code=(cov_sx5ei3ogs().s[93]++,400);let events=(cov_sx5ei3ogs().s[94]++,[]);cov_sx5ei3ogs().s[95]++;if(!validID(userid)){cov_sx5ei3ogs().b[15][0]++;cov_sx5ei3ogs().s[96]++;res.status(code).send("a valid userid must be set as a url parameter");cov_sx5ei3ogs().s[97]++;return;}else{cov_sx5ei3ogs().b[15][1]++;}cov_sx5ei3ogs().s[98]++;userid=new ObjectID(userid);cov_sx5ei3ogs().s[99]++;await DB.fetchAllEvents(userid).then(res=>{cov_sx5ei3ogs().f[14]++;cov_sx5ei3ogs().s[100]++;events=res;cov_sx5ei3ogs().s[101]++;code=res?(cov_sx5ei3ogs().b[16][0]++,200):(cov_sx5ei3ogs().b[16][1]++,400);}).catch(err=>{cov_sx5ei3ogs().f[15]++;cov_sx5ei3ogs().s[102]++;console.error(err);cov_sx5ei3ogs().s[103]++;code=400;});cov_sx5ei3ogs().s[104]++;if(code==200){cov_sx5ei3ogs().b[17][0]++;cov_sx5ei3ogs().s[105]++;res.status(code).send(events);}else{cov_sx5ei3ogs().b[17][1]++;cov_sx5ei3ogs().s[106]++;res.status(code).send("Could not find a match to given userid in the DB. Or else check databse connection");}});// !SECTION
// SECTION - FETCH EVENT
// Fetch an event
cov_sx5ei3ogs().s[107]++;app.get("/events/:userid/:eventid",async(req,res)=>{cov_sx5ei3ogs().f[16]++;let userid=(cov_sx5ei3ogs().s[108]++,req.params.userid);let eventid=(cov_sx5ei3ogs().s[109]++,req.params.eventid);let code=(cov_sx5ei3ogs().s[110]++,400);let event=(cov_sx5ei3ogs().s[111]++,{});cov_sx5ei3ogs().s[112]++;if(!validID(userid)){cov_sx5ei3ogs().b[18][0]++;cov_sx5ei3ogs().s[113]++;res.status(code).send("a valid userid must be set as a url parameter");cov_sx5ei3ogs().s[114]++;return;}else{cov_sx5ei3ogs().b[18][1]++;}cov_sx5ei3ogs().s[115]++;if(!validID(eventid)){cov_sx5ei3ogs().b[19][0]++;cov_sx5ei3ogs().s[116]++;res.status(code).send("a valid preferenceid must be set as a url parameter");cov_sx5ei3ogs().s[117]++;return;}else{cov_sx5ei3ogs().b[19][1]++;}cov_sx5ei3ogs().s[118]++;userid=new ObjectID(userid);cov_sx5ei3ogs().s[119]++;await DB.fetchEvent(userid,eventid).then(res=>{cov_sx5ei3ogs().f[17]++;cov_sx5ei3ogs().s[120]++;event=res;cov_sx5ei3ogs().s[121]++;code=res?(cov_sx5ei3ogs().b[20][0]++,200):(cov_sx5ei3ogs().b[20][1]++,400);}).catch(err=>{cov_sx5ei3ogs().f[18]++;cov_sx5ei3ogs().s[122]++;console.error(err);cov_sx5ei3ogs().s[123]++;code=400;});cov_sx5ei3ogs().s[124]++;if(code==200){cov_sx5ei3ogs().b[21][0]++;cov_sx5ei3ogs().s[125]++;res.status(code).send(event);}else{cov_sx5ei3ogs().b[21][1]++;cov_sx5ei3ogs().s[126]++;res.status(code).send("Could not find a match to given IDs in the DB. Or else check databse connection");}});// !SECTION
// TODO - DELETE EVENT
// TODO - UPDATE EVENT
// !SECTION
/* ----------------------------- Tracks Endpoint ----------------------------- */ // SECTION - TRACKS
// TODO - CREATE TRACKS LIST
// TODO - ADD TRACKS
// TODO - DELETE TRACKS
// TODO - UPDATE TRACKS
// TODO - DELETE TRACKS LIST
// TODO - FETCH TRACKS LIST
// !SECTION
/* -------------------------------------------------------------------------- */ /*                                Server Start                                */ /* -------------------------------------------------------------------------- */cov_sx5ei3ogs().s[127]++;startServer=async app=>{cov_sx5ei3ogs().f[19]++;cov_sx5ei3ogs().s[128]++;await DB.establishConnection().then(()=>{cov_sx5ei3ogs().f[20]++;cov_sx5ei3ogs().s[129]++;app.listen(process.env.PORT);cov_sx5ei3ogs().s[130]++;console.log("listening...");}).catch(err=>{cov_sx5ei3ogs().f[21]++;cov_sx5ei3ogs().s[131]++;console.error(err);cov_sx5ei3ogs().s[132]++;process.exit(1);});cov_sx5ei3ogs().s[133]++;return app;};/* -------------------------------------------------------------------------- */ /*                                    Utils                                   */ /* -------------------------------------------------------------------------- */cov_sx5ei3ogs().s[134]++;validID=id=>{cov_sx5ei3ogs().f[22]++;cov_sx5ei3ogs().s[135]++;if((cov_sx5ei3ogs().b[23][0]++,id==undefined)||(cov_sx5ei3ogs().b[23][1]++,id.length!=24)){cov_sx5ei3ogs().b[22][0]++;cov_sx5ei3ogs().s[136]++;return false;}else{cov_sx5ei3ogs().b[22][1]++;}cov_sx5ei3ogs().s[137]++;return true;// More validation
};cov_sx5ei3ogs().s[138]++;app=startServer(app);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwaS5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInBhdGgiLCJib2R5UGFyc2VyIiwiY29uZmlnIiwiT2JqZWN0SUQiLCJhcHAiLCJEQiIsImpvaW4iLCJfX2Rpcm5hbWUiLCJjb3JzIiwidXNlclJvdXRlcyIsInRhc2tSb3V0ZXMiLCJnb2FsUm91dGVzIiwidXNlIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwianNvbiIsIm9yaWdpbiIsImdldCIsInJlcSIsInJlcyIsInN0YXR1cyIsInNlbmQiLCJwb3N0IiwidXNlcmlkIiwicGFyYW1zIiwiY29kZSIsInZhbGlkSUQiLCJwcmVmZXJlbmNlIiwiX2lkIiwidGl0bGUiLCJib2R5IiwiaW5zZXJ0UHJlZmVyZW5jZSIsInRoZW4iLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsInByZWZlcmVuY2VzIiwiZmV0Y2hBbGxQcmVmZXJlbmNlcyIsInByZWZlcmVuY2VpZCIsImZldGNoUHJlZmVyZW5jZSIsImV2ZW50IiwiaW5zZXJ0RXZlbnQiLCJldmVudHMiLCJmZXRjaEFsbEV2ZW50cyIsImV2ZW50aWQiLCJmZXRjaEV2ZW50Iiwic3RhcnRTZXJ2ZXIiLCJlc3RhYmxpc2hDb25uZWN0aW9uIiwibGlzdGVuIiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJsb2ciLCJleGl0IiwiaWQiLCJ1bmRlZmluZWQiLCJsZW5ndGgiXSwibWFwcGluZ3MiOiJzM2pCQWVZO3lGQWZaLGdGLENBQ0EsZ0YsQ0FDQSxnRkFDQSxLQUFNQSxDQUFBQSxPQUFPLHlCQUFHQyxPQUFPLENBQUMsU0FBRCxDQUFWLENBQWIsQ0FDQSxLQUFNQyxDQUFBQSxJQUFJLHlCQUFHRCxPQUFPLENBQUMsTUFBRCxDQUFWLENBQVYsQ0FDQSxLQUFNRSxDQUFBQSxVQUFVLHlCQUFHRixPQUFPLENBQUMsYUFBRCxDQUFWLENBQWhCLEMsdUJBQ0FBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JHLE1BQWxCLEdBQ0EsR0FBSUMs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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxnRixDQUNBLGdGLENBQ0EsZ0YseUJBQ0EwQixXQUFXLENBQUcsS0FBTzNDLENBQUFBLEdBQVAsRUFBZSxrREFDekIsS0FBTUMsQ0FBQUEsRUFBRSxDQUFDMkMsbUJBQUgsR0FDRGhCLElBREMsQ0FDSSxJQUFNLGtEQUNSNUIsR0FBRyxDQUFDNkMsTUFBSixDQUFXQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsSUFBdkIsRUFEUSx5QkFFUmpCLE9BQU8sQ0FBQ2tCLEdBQVIsQ0FBWSxjQUFaLEVBQ0gsQ0FKQyxFQUtEcEIsS0FMQyxDQUtNQyxHQUFELEVBQVMsa0RBQ1pDLE9BQU8sQ0FBQ0MsS0FBUixDQUFjRixHQUFkLEVBRFkseUJBRVpnQixPQUFPLENBQUNJLElBQVIsQ0FBYSxDQUFiLEVBQ0gsQ0FSQyxDQUFOLENBRHlCLHlCQVV6QixNQUFPbEQsQ0FBQUEsR0FBUCxDQUNILENBWEQsQ0FZQSxnRixDQUNBLGdGLENBQ0EsZ0YseUJBQ0FzQixPQUFPLENBQUk2QixFQUFELEVBQVEsa0RBQ2QsR0FBSSw0QkFBQUEsRUFBRSxFQUFJQyxTQUFOLCtCQUFtQkQsRUFBRSxDQUFDRSxNQUFILEVBQWEsRUFBaEMsQ0FBSixDQUF3QyxxREFDcEMsTUFBTyxNQUFQLENBQ0gsQ0FGRCxpQ0FEYyx5QkFJZCxNQUFPLEtBQVAsQ0FDQTtBQUNILENBTkQsQyx5QkFRQXJELEdBQUcsQ0FBRzJDLFdBQVcsQ0FBQzNDLEdBQUQsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldFVwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5jb25zdCBleHByZXNzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XHJcbmNvbnN0IHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcclxuY29uc3QgYm9keVBhcnNlciA9IHJlcXVpcmUoXCJib2R5LXBhcnNlclwiKTtcclxucmVxdWlyZShcImRvdGVudlwiKS5jb25maWcoKTtcclxubGV0IE9iamVjdElEID0gcmVxdWlyZShcIm1vbmdvZGJcIikuT2JqZWN0SUQ7XHJcbmxldCBhcHAgPSBleHByZXNzKCk7XHJcbmNvbnN0IERCID0gcmVxdWlyZShwYXRoLmpvaW4oX19kaXJuYW1lLCBcIm1vZHVsZXNcIiwgXCJkYXRhYmFzZS5qc1wiKSk7XHJcbmNvbnN0IGNvcnMgPSByZXF1aXJlKFwiY29yc1wiKTtcclxuY29uc3QgdXNlclJvdXRlcyA9IHJlcXVpcmUoXCIuL3JvdXRlcy91c2Vyc1wiKTtcclxuY29uc3QgdGFza1JvdXRlcyA9IHJlcXVpcmUoXCIuL3JvdXRlcy90YXNrc1wiKTtcclxuY29uc3QgZ29hbFJvdXRlcyA9IHJlcXVpcmUoXCIuL3JvdXRlcy9nb2Fsc1wiKTtcclxuXHJcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKTtcclxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XHJcbmFwcC51c2UoXHJcbiAgICBjb3JzKHtcclxuICAgICAgICBvcmlnaW46IFtcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiXSxcclxuICAgIH0pXHJcbik7XHJcblxyXG5hcHAudXNlKFwiL3VzZXJzXCIsIHVzZXJSb3V0ZXMpO1xyXG5hcHAudXNlKFwiL3Rhc2tzXCIsIHRhc2tSb3V0ZXMpO1xyXG5hcHAudXNlKFwiL2dvYWxzXCIsIGdvYWxSb3V0ZXMpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRW5kcG9pbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuYXBwLmdldChcIi9cIiwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChcInNlcnZlciBpcyBydW5uaW5nIVwiKTtcclxufSk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBHb2FscyBFbmRwb2ludCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vLyBTRUNUSU9OIC0gR09BTFNcclxuXHJcbi8vICFTRUNUSU9OXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQcmVmZXJlbmNlcyBFbmRwb2ludCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vLyBTRUNUSU9OIC0gUFJFRkVSRU5DRVNcclxuLy8gU0VDVElPTiAtIENSRUFURSBQUkVGRVJFTkNFU1xyXG4vLyBBZGQgYSBuZXcgcHJlZmVyZW5jZVxyXG5hcHAucG9zdChcIi9wcmVmZXJlbmNlcy86dXNlcmlkXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgbGV0IHVzZXJpZCA9IHJlcS5wYXJhbXMudXNlcmlkO1xyXG4gICAgbGV0IGNvZGUgPSA0MDA7XHJcbiAgICBpZiAoIXZhbGlkSUQodXNlcmlkKSkge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoY29kZSkuc2VuZChcImEgdmFsaWQgdXNlcmlkIG11c3QgYmUgc2V0IGFzIGEgdXJsIHBhcmFtZXRlclwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB1c2VyaWQgPSBuZXcgT2JqZWN0SUQodXNlcmlkKTtcclxuICAgIGxldCBwcmVmZXJlbmNlID0ge1xyXG4gICAgICAgIF9pZDogbmV3IE9iamVjdElEKCksXHJcbiAgICAgICAgdGl0bGU6IHJlcS5ib2R5LnRpdGxlLCAvLyBUT0RPIC0gaWYgbm8gdGl0bGUgaXMgZ2l2ZW4gbWFrZSBpdCBcIlwiXHJcbiAgICB9O1xyXG5cclxuICAgIGF3YWl0IERCLmluc2VydFByZWZlcmVuY2UodXNlcmlkLCBwcmVmZXJlbmNlKVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcyA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb2RlID0gMjAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29kZSA9IDQwMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbiAgICBpZiAoY29kZSA9PSAyMDEpIHtcclxuICAgICAgICByZXMuc3RhdHVzKGNvZGUpLnNlbmQocHJlZmVyZW5jZSk7XHJcbiAgICB9IGVsc2UgaWYgKGNvZGUgPT0gNDAwKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyhjb2RlKS5zZW5kKFxyXG4gICAgICAgICAgICBcImNvdWxkIG5vdCBmaW5kIGEgbWF0Y2ggaW4gdGhlIGRhdGFiYXNlIGJhc2VkIG9uIHBhc3NlZCBpbiBJRFwiXHJcbiAgICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoXCJ1bmV4cGVjdGVkIGVycm9yXCIpO1xyXG4gICAgfVxyXG59KTtcclxuLy8gIVNFQ1RJT05cclxuXHJcbi8vIFNFQ1RJT04gLSBGRVRDSCBBTEwgUFJFRkVSRU5DRVNcclxuLy8gRmV0Y2ggYWxsIHByZWZlcmVuY2VzXHJcbmFwcC5nZXQoXCIvcHJlZmVyZW5jZXMvOnVzZXJpZFwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGxldCB1c2VyaWQgPSByZXEucGFyYW1zLnVzZXJpZDtcclxuICAgIGxldCBjb2RlID0gNDAwO1xyXG4gICAgbGV0IHByZWZlcmVuY2VzID0gW107XHJcbiAgICBpZiAoIXZhbGlkSUQodXNlcmlkKSkge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoY29kZSkuc2VuZChcImEgdmFsaWQgdXNlcmlkIG11c3QgYmUgc2V0IGFzIGEgdXJsIHBhcmFtZXRlclwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB1c2VyaWQgPSBuZXcgT2JqZWN0SUQodXNlcmlkKTtcclxuXHJcbiAgICBhd2FpdCBEQi5mZXRjaEFsbFByZWZlcmVuY2VzKHVzZXJpZClcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIHByZWZlcmVuY2VzID0gcmVzO1xyXG4gICAgICAgICAgICBjb2RlID0gcmVzID8gMjAwIDogNDAwO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICBjb2RlID0gNDAwO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIGlmIChjb2RlID09IDIwMCkge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoY29kZSkuc2VuZChwcmVmZXJlbmNlcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoY29kZSkuc2VuZChcclxuICAgICAgICAgICAgXCJDb3VsZCBub3QgZmluZCBhIG1hdGNoIHRvIGdpdmVuIElEcyBpbiB0aGUgREIuIE9yIGVsc2UgY2hlY2sgZGF0YWJzZSBjb25uZWN0aW9uXCJcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59KTtcclxuLy8gIVNFQ1RJT05cclxuXHJcbi8vIFNFQ1RJT04gLSBGRVRDSCBQUkVGRVJFTkNFXHJcbi8vIEZldGNoIGEgcHJlZmVyZW5jZVxyXG5hcHAuZ2V0KFwiL3ByZWZlcmVuY2VzLzp1c2VyaWQvOnByZWZlcmVuY2VpZFwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGxldCB1c2VyaWQgPSByZXEucGFyYW1zLnVzZXJpZDtcclxuICAgIGxldCBwcmVmZXJlbmNlaWQgPSByZXEucGFyYW1zLnByZWZlcmVuY2VpZDtcclxuICAgIGxldCBjb2RlID0gNDAwO1xyXG4gICAgbGV0IHByZWZlcmVuY2UgPSB7fTtcclxuICAgIGlmICghdmFsaWRJRCh1c2VyaWQpKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyhjb2RlKS5zZW5kKFwiYSB2YWxpZCB1c2VyaWQgbXVzdCBiZSBzZXQgYXMgYSB1cmwgcGFyYW1ldGVyXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICghdmFsaWRJRChwcmVmZXJlbmNlaWQpKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyhjb2RlKS5zZW5kKFxyXG4gICAgICAgICAgICBcImEgdmFsaWQgcHJlZmVyZW5jZWlkIG11c3QgYmUgc2V0IGFzIGEgdXJsIHBhcmFtZXRlclwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB1c2VyaWQgPSBuZXcgT2JqZWN0SUQodXNlcmlkKTtcclxuXHJcbiAgICBhd2FpdCBEQi5mZXRjaFByZWZlcmVuY2UodXNlcmlkLCBwcmVmZXJlbmNlaWQpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBwcmVmZXJlbmNlID0gcmVzO1xyXG4gICAgICAgICAgICBjb2RlID0gcmVzID8gMjAwIDogNDAwO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICBjb2RlID0gNDAwO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIGlmIChjb2RlID09IDIwMCkge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoY29kZSkuc2VuZChwcmVmZXJlbmNlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyhjb2RlKS5zZW5kKFxyXG4gICAgICAgICAgICBcIkNvdWxkIG5vdCBmaW5kIGEgbWF0Y2ggdG8gZ2l2ZW4gSURzIGluIHRoZSBEQi4gT3IgZWxzZSBjaGVjayBkYXRhYnNlIGNvbm5lY3Rpb25cIlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0pO1xyXG4vLyAhU0VDVElPTlxyXG4vLyBUT0RPIC0gREVMRVRFIFBSRUZFUkVOQ0VcclxuLy8gVE9ETyAtIFVQREFURSBQUkVGRVJFTkNFXHJcbi8vICFTRUNUSU9OXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFdmVudHMgRW5kcG9pbnQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vLyBTRUNUSU9OIC0gRVZFTlRTXHJcbi8vIFNFQ1RJT04gLSBDUkVBVEUgRVZFTlRTXHJcbi8vIEFkZCBhIG5ldyBldmVudFxyXG5hcHAucG9zdChcIi9ldmVudHMvOnVzZXJpZFwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGxldCB1c2VyaWQgPSByZXEucGFyYW1zLnVzZXJpZDtcclxuICAgIGxldCBjb2RlID0gNDAwO1xyXG4gICAgaWYgKCF2YWxpZElEKHVzZXJpZCkpIHtcclxuICAgICAgICByZXMuc3RhdHVzKGNvZGUpLnNlbmQoXCJhIHZhbGlkIHVzZXJpZCBtdXN0IGJlIHNldCBhcyBhIHVybCBwYXJhbWV0ZXJcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdXNlcmlkID0gbmV3IE9iamVjdElEKHVzZXJpZCk7XHJcbiAgICBsZXQgZXZlbnQgPSB7XHJcbiAgICAgICAgX2lkOiBuZXcgT2JqZWN0SUQoKSxcclxuICAgICAgICB0aXRsZTogcmVxLmJvZHkudGl0bGUsXHJcbiAgICAgICAgLy8gVE9ETyAtIE90aGVyIGZpZWxkcyBzdWNoIGFzIHN0YXJ0IHRpbWUsIGVuZCB0aW1lLCBjYXRlZ29yeSwgZWN0LlxyXG4gICAgfTtcclxuXHJcbiAgICBhd2FpdCBEQi5pbnNlcnRFdmVudCh1c2VyaWQsIGV2ZW50KVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcyA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb2RlID0gMjAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29kZSA9IDQwMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbiAgICBpZiAoY29kZSA9PSAyMDEpIHtcclxuICAgICAgICByZXMuc3RhdHVzKGNvZGUpLnNlbmQoZXZlbnQpO1xyXG4gICAgfSBlbHNlIGlmIChjb2RlID09IDQwMCkge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoY29kZSkuc2VuZChcclxuICAgICAgICAgICAgXCJjb3VsZCBub3QgZmluZCBhIG1hdGNoIGluIHRoZSBkYXRhYmFzZSBiYXNlZCBvbiBwYXNzZWQgaW4gSURcIlxyXG4gICAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwidW5leHBlY3RlZCBlcnJvclwiKTtcclxuICAgIH1cclxufSk7XHJcbi8vICFTRUNUSU9OXHJcblxyXG4vLyBTRUNUSU9OIC0gRkVUQ0ggQUxMIEVWRU5UU1xyXG4vLyBGZXRjaCBhbGwgZXZlbnRzXHJcbmFwcC5nZXQoXCIvZXZlbnRzLzp1c2VyaWRcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBsZXQgdXNlcmlkID0gcmVxLnBhcmFtcy51c2VyaWQ7XHJcbiAgICBsZXQgY29kZSA9IDQwMDtcclxuICAgIGxldCBldmVudHMgPSBbXTtcclxuICAgIGlmICghdmFsaWRJRCh1c2VyaWQpKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyhjb2RlKS5zZW5kKFwiYSB2YWxpZCB1c2VyaWQgbXVzdCBiZSBzZXQgYXMgYSB1cmwgcGFyYW1ldGVyXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHVzZXJpZCA9IG5ldyBPYmplY3RJRCh1c2VyaWQpO1xyXG5cclxuICAgIGF3YWl0IERCLmZldGNoQWxsRXZlbnRzKHVzZXJpZClcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGV2ZW50cyA9IHJlcztcclxuICAgICAgICAgICAgY29kZSA9IHJlcyA/IDIwMCA6IDQwMDtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgY29kZSA9IDQwMDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICBpZiAoY29kZSA9PSAyMDApIHtcclxuICAgICAgICByZXMuc3RhdHVzKGNvZGUpLnNlbmQoZXZlbnRzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyhjb2RlKS5zZW5kKFxyXG4gICAgICAgICAgICBcIkNvdWxkIG5vdCBmaW5kIGEgbWF0Y2ggdG8gZ2l2ZW4gdXNlcmlkIGluIHRoZSBEQi4gT3IgZWxzZSBjaGVjayBkYXRhYnNlIGNvbm5lY3Rpb25cIlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0pO1xyXG4vLyAhU0VDVElPTlxyXG5cclxuLy8gU0VDVElPTiAtIEZFVENIIEVWRU5UXHJcbi8vIEZldGNoIGFuIGV2ZW50XHJcbmFwcC5nZXQoXCIvZXZlbnRzLzp1c2VyaWQvOmV2ZW50aWRcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBsZXQgdXNlcmlkID0gcmVxLnBhcmFtcy51c2VyaWQ7XHJcbiAgICBsZXQgZXZlbnRpZCA9IHJlcS5wYXJhbXMuZXZlbnRpZDtcclxuICAgIGxldCBjb2RlID0gNDAwO1xyXG4gICAgbGV0IGV2ZW50ID0ge307XHJcbiAgICBpZiAoIXZhbGlkSUQodXNlcmlkKSkge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoY29kZSkuc2VuZChcImEgdmFsaWQgdXNlcmlkIG11c3QgYmUgc2V0IGFzIGEgdXJsIHBhcmFtZXRlclwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoIXZhbGlkSUQoZXZlbnRpZCkpIHtcclxuICAgICAgICByZXMuc3RhdHVzKGNvZGUpLnNlbmQoXHJcbiAgICAgICAgICAgIFwiYSB2YWxpZCBwcmVmZXJlbmNlaWQgbXVzdCBiZSBzZXQgYXMgYSB1cmwgcGFyYW1ldGVyXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHVzZXJpZCA9IG5ldyBPYmplY3RJRCh1c2VyaWQpO1xyXG5cclxuICAgIGF3YWl0IERCLmZldGNoRXZlbnQodXNlcmlkLCBldmVudGlkKVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgZXZlbnQgPSByZXM7XHJcbiAgICAgICAgICAgIGNvZGUgPSByZXMgPyAyMDAgOiA0MDA7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgIGNvZGUgPSA0MDA7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgaWYgKGNvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyhjb2RlKS5zZW5kKGV2ZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyhjb2RlKS5zZW5kKFxyXG4gICAgICAgICAgICBcIkNvdWxkIG5vdCBmaW5kIGEgbWF0Y2ggdG8gZ2l2ZW4gSURzIGluIHRoZSBEQi4gT3IgZWxzZSBjaGVjayBkYXRhYnNlIGNvbm5lY3Rpb25cIlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0pO1xyXG4vLyAhU0VDVElPTlxyXG4vLyBUT0RPIC0gREVMRVRFIEVWRU5UXHJcbi8vIFRPRE8gLSBVUERBVEUgRVZFTlRcclxuLy8gIVNFQ1RJT05cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFRyYWNrcyBFbmRwb2ludCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vLyBTRUNUSU9OIC0gVFJBQ0tTXHJcbi8vIFRPRE8gLSBDUkVBVEUgVFJBQ0tTIExJU1RcclxuLy8gVE9ETyAtIEFERCBUUkFDS1NcclxuLy8gVE9ETyAtIERFTEVURSBUUkFDS1NcclxuLy8gVE9ETyAtIFVQREFURSBUUkFDS1NcclxuLy8gVE9ETyAtIERFTEVURSBUUkFDS1MgTElTVFxyXG4vLyBUT0RPIC0gRkVUQ0ggVFJBQ0tTIExJU1RcclxuLy8gIVNFQ1RJT05cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXJ2ZXIgU3RhcnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnN0YXJ0U2VydmVyID0gYXN5bmMgKGFwcCkgPT4ge1xyXG4gICAgYXdhaXQgREIuZXN0YWJsaXNoQ29ubmVjdGlvbigpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBhcHAubGlzdGVuKHByb2Nlc3MuZW52LlBPUlQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImxpc3RlbmluZy4uLlwiKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgcmV0dXJuIGFwcDtcclxufTtcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVdGlscyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFsaWRJRCA9IChpZCkgPT4ge1xyXG4gICAgaWYgKGlkID09IHVuZGVmaW5lZCB8fCBpZC5sZW5ndGggIT0gMjQpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICAgIC8vIE1vcmUgdmFsaWRhdGlvblxyXG59O1xyXG5cclxuYXBwID0gc3RhcnRTZXJ2ZXIoYXBwKTtcclxuIl19